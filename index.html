<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" href="style.css">
  
  <title>Frontend Mentor | Interactive rating component</title>
</head>
<body>

  <div class="card-rating" role="contentinfo">
    <img src="images/icon-star.svg" alt="">

    <h2 class="header">How did we do?</h2>

    <p class="info">Please let us know how we did with your support request. All feedback is appreciated 
    to help us improve our offering!</p>

    <div class="ratings">
      <button class="rate-no" onclick="selectRating(event)">1</button>
      <button class="rate-no" onclick="selectRating(event)">2</button>
      <button class="rate-no" onclick="selectRating(event)">3</button>
      <button class="rate-no" onclick="selectRating(event)">4</button>
      <button class="rate-no" onclick="selectRating(event)">5</button>
    </div>

    <button type="submit" class="sub" onclick="submitRating(event)">SUBMIT</button>
  </div>

  <div class="card-ty" role="complementary">
    <img src="images/illustration-thank-you.svg" alt="">

    <p class="rate-info-ty">You selected <span class="rated"></span> out of 5</p>

    <h2 class="header-ty">Thank you!</h2>

    <p class="info-ty">We appreciate you taking the time to give a rating. If you ever need more support, 
      donâ€™t hesitate to get in touch!</p>
  </div>

  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
    Coded by <a href="#">Ved Jain</a>.
  </div>
  
  <script>
  /**
    * @param {Event} evt 
    * @param {Number} rating
  */

  let rating_to_send;

  const selectRating = (evt) => {
    const ratings = document.getElementsByClassName("rate-no");
    let i;

    for(i = 0; i < ratings.length; i++) {
        ratings[i].className = ratings[i].className.replace(" active", "");
    }

    evt.currentTarget.className += " active";

    rating_to_send = evt.currentTarget.textContent;
    console.log("Rating to send: ", rating_to_send);
  }

  const submitRating = (evt) => {
    const card_rating = document.getElementsByClassName("card-rating");
    const card_ty = document.getElementsByClassName("card-ty");
    const rated = document.getElementsByClassName("rated").item(0);

    card_rating.item(0).style.display = "none";
    card_ty.item(0).style.display = "block";

    if(!rating_to_send) {
      rating_to_send = 0;
    }

    rated.textContent = rating_to_send;
  }
  </script>
</body>
</html>